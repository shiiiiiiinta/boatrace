<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOATRACE ç· åˆ‡æ™‚åˆ»èª¿æŸ»</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            padding: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
        }
        .section {
            background: #2d2d2d;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        h2 { color: #4ec9b0; }
        pre {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        button {
            background: #007acc;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover { background: #005a9e; }
        .url { color: #ce9178; }
    </style>
</head>
<body>
    <h1>ğŸ” BOATRACE ç· åˆ‡æ™‚åˆ»ãƒ‡ãƒ¼ã‚¿èª¿æŸ»</h1>
    
    <div class="section">
        <h2>èª¿æŸ»å¯¾è±¡URL</h2>
        <p>ä»¥ä¸‹ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰ç· åˆ‡æ™‚åˆ»ã‚’å–å¾—ã§ãã‚‹ã‹èª¿æŸ»ã—ã¾ã™ï¼š</p>
        
        <h3>1. ãƒ¬ãƒ¼ã‚¹ä¸€è¦§ãƒšãƒ¼ã‚¸ï¼ˆä»Šæ—¥ã®ç•ªçµ„è¡¨ï¼‰</h3>
        <p class="url">https://www.boatrace.jp/owpc/pc/race/racelist?jcd=10&hd=20260218</p>
        <button onclick="testURL('racelist')">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        <pre id="result1">ã¾ã å®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã›ã‚“</pre>
        
        <h3>2. ãƒ¬ãƒ¼ã‚¹å‰æƒ…å ±ãƒšãƒ¼ã‚¸</h3>
        <p class="url">https://www.boatrace.jp/owpc/pc/race/beforeinfo?jcd=10&rno=1&hd=20260218</p>
        <button onclick="testURL('beforeinfo')">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        <pre id="result2">ã¾ã å®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã›ã‚“</pre>
        
        <h3>3. å‡ºèµ°è¡¨ãƒšãƒ¼ã‚¸</h3>
        <p class="url">https://www.boatrace.jp/owpc/pc/race/racelist?rno=1&jcd=10&hd=20260218</p>
        <button onclick="testURL('raceindex')">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        <pre id="result3">ã¾ã å®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã›ã‚“</pre>
        
        <h3>4. JSON APIï¼ˆã‚‚ã—ã‚ã‚Œã°ï¼‰</h3>
        <p class="url">https://www.boatrace.jp/owpc/pc/data/race?jcd=10&hd=20260218</p>
        <button onclick="testURL('json')">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        <pre id="result4">ã¾ã å®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã›ã‚“</pre>
    </div>
    
    <div class="section">
        <h2>WorkerçµŒç”±ãƒ†ã‚¹ãƒˆ</h2>
        <p>Cloudflare WorkerçµŒç”±ã§å–å¾—ã‚’è©¦ã¿ã¾ã™ï¼ˆCORSå›é¿ï¼‰</p>
        <button onclick="testViaWorker()">WorkerçµŒç”±ã§ãƒ†ã‚¹ãƒˆ</button>
        <pre id="workerResult">ã¾ã å®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã›ã‚“</pre>
    </div>

    <script>
        async function testURL(type) {
            const urls = {
                'racelist': 'https://www.boatrace.jp/owpc/pc/race/racelist?jcd=10&hd=20260218',
                'beforeinfo': 'https://www.boatrace.jp/owpc/pc/race/beforeinfo?jcd=10&rno=1&hd=20260218',
                'raceindex': 'https://www.boatrace.jp/owpc/pc/race/raceindex?jcd=10&hd=20260218',
                'json': 'https://www.boatrace.jp/owpc/pc/data/race?jcd=10&hd=20260218'
            };
            
            const resultIds = {
                'racelist': 'result1',
                'beforeinfo': 'result2',
                'raceindex': 'result3',
                'json': 'result4'
            };
            
            const resultEl = document.getElementById(resultIds[type]);
            resultEl.textContent = 'å–å¾—ä¸­...\n';
            
            try {
                // CORSåˆ¶é™ãŒã‚ã‚‹ãŸã‚ã€ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã¯å¤±æ•—ã™ã‚‹å¯èƒ½æ€§ãŒé«˜ã„
                const response = await fetch(urls[type], { mode: 'no-cors' });
                resultEl.textContent = 'CORSåˆ¶é™ã«ã‚ˆã‚Šå†…å®¹ã‚’ç›´æ¥ç¢ºèªã§ãã¾ã›ã‚“ã€‚\n';
                resultEl.textContent += 'WorkerçµŒç”±ã§ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ã§ã™ã€‚\n\n';
                resultEl.textContent += 'æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—: WorkerçµŒç”±ã§ãƒ†ã‚¹ãƒˆ\n';
                resultEl.textContent += 'ã¾ãŸã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ç›´æ¥URLã‚’é–‹ã„ã¦HTMLã‚’ç¢ºèªã—ã¦ãã ã•ã„:\n';
                resultEl.textContent += urls[type];
            } catch (error) {
                resultEl.textContent = `ã‚¨ãƒ©ãƒ¼: ${error.message}\n\n`;
                resultEl.textContent += 'CORSåˆ¶é™ã®ãŸã‚ã€WorkerçµŒç”±ã§ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ã§ã™ã€‚';
            }
        }
        
        async function testViaWorker() {
            const resultEl = document.getElementById('workerResult');
            resultEl.textContent = 'å–å¾—ä¸­...\n';
            
            try {
                // Worker ã«æ–°ã—ã„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¿½åŠ ã—ã¦ã€ç· åˆ‡æ™‚åˆ»ã‚’å–å¾—
                // ã¾ãšã¯æ—¢å­˜ã®ã‚ªãƒƒã‚ºã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§å–å¾—ã§ãã‚‹ã‹ç¢ºèª
                
                resultEl.textContent = 'ç¾åœ¨ã€Worker ã«ã¯ç· åˆ‡æ™‚åˆ»å–å¾—ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ã€‚\n\n';
                resultEl.textContent += 'æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:\n';
                resultEl.textContent += '1. Worker ã« /api/race-schedule/:jcd ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¿½åŠ \n';
                resultEl.textContent += '2. BOATRACEå…¬å¼ã‚µã‚¤ãƒˆã®HTML/JSONã‹ã‚‰ç· åˆ‡æ™‚åˆ»ã‚’ãƒ‘ãƒ¼ã‚¹\n';
                resultEl.textContent += '3. å„ãƒ¬ãƒ¼ã‚¹ã®ç· åˆ‡æ™‚åˆ»ã‚’è¿”ã™\n\n';
                resultEl.textContent += 'ã¾ãšã€å…¬å¼ã‚µã‚¤ãƒˆã®HTMLã‚’æ‰‹å‹•ã§ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\n';
                resultEl.textContent += 'ãƒ–ãƒ©ã‚¦ã‚¶ã§ä»¥ä¸‹ã‚’é–‹ã„ã¦ãã ã•ã„:\n';
                resultEl.textContent += 'https://www.boatrace.jp/owpc/pc/race/racelist?jcd=10&hd=20260218\n\n';
                resultEl.textContent += 'HTMLå†…ã«ç· åˆ‡æ™‚åˆ»ï¼ˆä¾‹: "10:45" ãªã©ï¼‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚';
                
            } catch (error) {
                resultEl.textContent = `ã‚¨ãƒ©ãƒ¼: ${error.message}`;
            }
        }
    </script>
</body>
</html>

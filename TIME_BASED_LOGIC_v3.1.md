# æ™‚é–“å¸¯åˆ¥ãƒ­ã‚¸ãƒƒã‚¯å®Œå…¨ç‰ˆ - v3.1.0

## ðŸ“… æ­£ã—ã„æ™‚é–“å¸¯åˆ¥ãƒ«ãƒ¼ãƒ«

### â° 0:00ã€œ7:59ï¼ˆæ·±å¤œã€œæ—©æœï¼‰
```
â†’ å‰æ—¥ã«é–‹å‚¬ãŒã‚ã£ãŸå ´ã®12Rçµæžœã‚’è¡¨ç¤º
â†’ ç· åˆ‡æ™‚åˆ»: ã€ŒðŸŒ™ å‰æ—¥ãƒ‡ãƒ¼ã‚¿ã€

ä¾‹: 2026-02-19 1:00
  â†’ 2026-02-18ï¼ˆå‰æ—¥ï¼‰ã®12Rã‚’è¡¨ç¤º
  â†’ å¹³å’Œå³¶ãƒ»å®®å³¶ã¯é–‹å‚¬ãªã— â†’ éžè¡¨ç¤º
```

### â° 8:00ã€œ22:59ï¼ˆé€šå¸¸æ™‚é–“å¸¯ï¼‰
```
â†’ å½“æ—¥ã®ç· åˆ‡æœªåˆ°æ¥ã‹ã¤æœ€ã‚‚ç· åˆ‡ã«è¿‘ã„ãƒ¬ãƒ¼ã‚¹ã®ã‚ªãƒƒã‚ºã‚’è¡¨ç¤º
â†’ ç· åˆ‡æ™‚åˆ»: ã€Œâ° HH:MMã€

ä¾‹: 2026-02-19 14:00
  â†’ 2026-02-19ï¼ˆå½“æ—¥ï¼‰ã®ãƒ¬ãƒ¼ã‚¹ã‹ã‚‰é¸æŠž
  â†’ 9Rï¼ˆç· åˆ‡14:25ï¼‰ãŒæœ€ã‚‚è¿‘ã„ â†’ 9Rã‚’è¡¨ç¤º
  â†’ å…¨ãƒ¬ãƒ¼ã‚¹çµ‚äº†æ¸ˆã¿ â†’ 12Rã‚’è¡¨ç¤º
```

### â° 23:00ã€œ23:59ï¼ˆæ·±å¤œï¼‰
```
â†’ å½“æ—¥ã«é–‹å‚¬ãŒã‚ã£ãŸå ´ã®12Rçµæžœã‚’è¡¨ç¤º
â†’ ç· åˆ‡æ™‚åˆ»: ã€Œâœ… æœ¬æ—¥ãƒ‡ãƒ¼ã‚¿ã€

ä¾‹: 2026-02-19 23:30
  â†’ 2026-02-19ï¼ˆå½“æ—¥ï¼‰ã®12Rã‚’è¡¨ç¤º
  â†’ å¹³å’Œå³¶ãƒ»å®®å³¶ã¯é–‹å‚¬ãªã— â†’ éžè¡¨ç¤º
```

---

## ðŸ”§ å®Ÿè£…å†…å®¹

### ä¿®æ­£1: fetchVenueOdds() - æ™‚é–“å¸¯åˆ¤å®š
```javascript
const hours = now.getHours();
let targetDate, showOnlyRace12;

if (hours >= 0 && hours < 8) {
    // æ·±å¤œã€œæ—©æœ: å‰æ—¥ã®12R
    const yesterday = new Date(now);
    yesterday.setDate(yesterday.getDate() - 1);
    targetDate = yesterday.toISOString().slice(0, 10).replace(/-/g, '');
    showOnlyRace12 = true;
} else if (hours >= 23) {
    // æ·±å¤œ23æ™‚å°: å½“æ—¥ã®12R
    targetDate = now.toISOString().slice(0, 10).replace(/-/g, '');
    showOnlyRace12 = true;
} else {
    // é€šå¸¸æ™‚é–“å¸¯: ç· åˆ‡ã«æœ€ã‚‚è¿‘ã„ãƒ¬ãƒ¼ã‚¹
    targetDate = now.toISOString().slice(0, 10).replace(/-/g, '');
    showOnlyRace12 = false;
}
```

### ä¿®æ­£2: selectBestRace() - å¼·åˆ¶12Rè¡¨ç¤º
```javascript
async function selectBestRace(jcd, hd, showOnlyRace12 = false) {
    // ...ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å–å¾—...
    
    if (showOnlyRace12) {
        // 23æ™‚å°ã¾ãŸã¯æ·±å¤œ0-7æ™‚ã¯å¼·åˆ¶çš„ã«12R
        const race12 = races.find(r => r.raceNumber === 12);
        return { raceNumber: 12, limitTime: race12.limitTime, ... };
    }
    
    // é€šå¸¸æ™‚é–“å¸¯ã¯ç· åˆ‡ã«æœ€ã‚‚è¿‘ã„ãƒ¬ãƒ¼ã‚¹ã‚’é¸æŠž
    // ...
}
```

### ä¿®æ­£3: renderVenueCard() - ç· åˆ‡æ™‚åˆ»è¡¨ç¤º
```javascript
const hours = now.getHours();
const isResultDisplay = (hours >= 0 && hours < 8) || (hours >= 23);

if (isResultDisplay && oddsData.limitTimestamp < Date.now()) {
    if (hours >= 0 && hours < 8) {
        limitTimeDisplay = 'ðŸŒ™ å‰æ—¥ãƒ‡ãƒ¼ã‚¿';
    } else {
        limitTimeDisplay = 'âœ… æœ¬æ—¥ãƒ‡ãƒ¼ã‚¿';
    }
} else {
    limitTimeDisplay = 'â° HH:MM';
}
```

---

## ðŸ“Š å‹•ä½œä¾‹

### ã‚±ãƒ¼ã‚¹1: 2026-02-19 1:00ï¼ˆæ·±å¤œï¼‰
| ç«¶è‰‡å ´ | 2/18é–‹å‚¬ | è¡¨ç¤ºå†…å®¹ |
|--------|----------|---------|
| æ¡ç”Ÿï¼ˆ01ï¼‰ | âœ… ã‚ã‚Š | 12Rï¼ˆðŸŒ™ å‰æ—¥ãƒ‡ãƒ¼ã‚¿ï¼‰ |
| å¹³å’Œå³¶ï¼ˆ04ï¼‰ | âŒ ãªã— | æœ¬æ—¥ã®ãƒ¬ãƒ¼ã‚¹é–‹å‚¬ã¯ã‚ã‚Šã¾ã›ã‚“ |
| ä¸‰å›½ï¼ˆ10ï¼‰ | âœ… ã‚ã‚Š | 12Rï¼ˆðŸŒ™ å‰æ—¥ãƒ‡ãƒ¼ã‚¿ï¼‰ |
| å®®å³¶ï¼ˆ17ï¼‰ | âŒ ãªã— | æœ¬æ—¥ã®ãƒ¬ãƒ¼ã‚¹é–‹å‚¬ã¯ã‚ã‚Šã¾ã›ã‚“ |
| è‹¥æ¾ï¼ˆ20ï¼‰ | âœ… ã‚ã‚Š | 12Rï¼ˆðŸŒ™ å‰æ—¥ãƒ‡ãƒ¼ã‚¿ï¼‰ |

### ã‚±ãƒ¼ã‚¹2: 2026-02-19 14:00ï¼ˆé€šå¸¸æ™‚é–“å¸¯ï¼‰
| ç«¶è‰‡å ´ | çŠ¶æ…‹ | è¡¨ç¤ºå†…å®¹ |
|--------|------|---------|
| æ¡ç”Ÿï¼ˆ01ï¼‰ | 9Rç· åˆ‡å‰ï¼ˆ14:25ï¼‰ | 9Rï¼ˆâ° 14:25ï¼‰ |
| å¹³å’Œå³¶ï¼ˆ04ï¼‰ | é–‹å‚¬ãªã— | æœ¬æ—¥ã®ãƒ¬ãƒ¼ã‚¹é–‹å‚¬ã¯ã‚ã‚Šã¾ã›ã‚“ |
| ä¸‰å›½ï¼ˆ10ï¼‰ | 8Rç· åˆ‡å‰ï¼ˆ14:10ï¼‰ | 8Rï¼ˆâ° 14:10ï¼‰ |
| è‹¥æ¾ï¼ˆ20ï¼‰ | å…¨ãƒ¬ãƒ¼ã‚¹çµ‚äº† | 12Rï¼ˆâ° 16:45ï¼‰ |

### ã‚±ãƒ¼ã‚¹3: 2026-02-19 23:30ï¼ˆæ·±å¤œ23æ™‚å°ï¼‰
| ç«¶è‰‡å ´ | 2/19é–‹å‚¬ | è¡¨ç¤ºå†…å®¹ |
|--------|----------|---------|
| æ¡ç”Ÿï¼ˆ01ï¼‰ | âœ… ã‚ã‚Š | 12Rï¼ˆâœ… æœ¬æ—¥ãƒ‡ãƒ¼ã‚¿ï¼‰ |
| å¹³å’Œå³¶ï¼ˆ04ï¼‰ | âŒ ãªã— | æœ¬æ—¥ã®ãƒ¬ãƒ¼ã‚¹é–‹å‚¬ã¯ã‚ã‚Šã¾ã›ã‚“ |
| ä¸‰å›½ï¼ˆ10ï¼‰ | âœ… ã‚ã‚Š | 12Rï¼ˆâœ… æœ¬æ—¥ãƒ‡ãƒ¼ã‚¿ï¼‰ |
| å®®å³¶ï¼ˆ17ï¼‰ | âŒ ãªã— | æœ¬æ—¥ã®ãƒ¬ãƒ¼ã‚¹é–‹å‚¬ã¯ã‚ã‚Šã¾ã›ã‚“ |
| è‹¥æ¾ï¼ˆ20ï¼‰ | âœ… ã‚ã‚Š | 12Rï¼ˆâœ… æœ¬æ—¥ãƒ‡ãƒ¼ã‚¿ï¼‰ |

---

## âœ… ç¢ºèªé …ç›®

### æ·±å¤œ1:00ã®ç¢ºèªï¼ˆç¾åœ¨ï¼‰
- [ ] å‰æ—¥ï¼ˆ2/18ï¼‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
- [ ] é–‹å‚¬ãŒã‚ã£ãŸå ´ã®ã¿12Rã‚’è¡¨ç¤º
- [ ] å¹³å’Œå³¶ãƒ»å®®å³¶ã¯ã€Œæœ¬æ—¥ã®ãƒ¬ãƒ¼ã‚¹é–‹å‚¬ã¯ã‚ã‚Šã¾ã›ã‚“ã€
- [ ] ç· åˆ‡æ™‚åˆ»ãŒã€ŒðŸŒ™ å‰æ—¥ãƒ‡ãƒ¼ã‚¿ã€

### é€šå¸¸æ™‚é–“å¸¯14:00ã®ç¢ºèªï¼ˆä»®å®šï¼‰
- [ ] å½“æ—¥ï¼ˆ2/19ï¼‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
- [ ] ç· åˆ‡æœªåˆ°æ¥ã§æœ€ã‚‚è¿‘ã„ãƒ¬ãƒ¼ã‚¹ã‚’è¡¨ç¤º
- [ ] ç· åˆ‡æ™‚åˆ»ãŒã€Œâ° HH:MMã€

### æ·±å¤œ23:30ã®ç¢ºèªï¼ˆä»®å®šï¼‰
- [ ] å½“æ—¥ï¼ˆ2/19ï¼‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
- [ ] é–‹å‚¬ãŒã‚ã£ãŸå ´ã®ã¿12Rã‚’è¡¨ç¤º
- [ ] ç· åˆ‡æ™‚åˆ»ãŒã€Œâœ… æœ¬æ—¥ãƒ‡ãƒ¼ã‚¿ã€

---

## ðŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ä¸è¦

- âœ… Workerå´ã¯å¤‰æ›´ãªã—ï¼ˆworker-v3.js ã®ã¾ã¾ï¼‰
- âœ… ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆjs/main.jsï¼‰ã®ã¿ä¿®æ­£
- âœ… ãƒ–ãƒ©ã‚¦ã‚¶ã§ Ctrl+Shift+R ã§ãƒªãƒ­ãƒ¼ãƒ‰

---

## ðŸ“ å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«

- âœ… **js/main.js** - æ™‚é–“å¸¯åˆ¥ãƒ­ã‚¸ãƒƒã‚¯è¿½åŠ 
- âœ… **TIME_BASED_LOGIC_v3.1.md** - ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

---

**ä½œæˆæ—¥æ™‚**: 2026-02-19 04:00  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 3.1.0  
**å¤‰æ›´å†…å®¹**: 23æ™‚å°ã®å‡¦ç†è¿½åŠ ã€ç· åˆ‡æ™‚åˆ»è¡¨ç¤ºæ”¹å–„

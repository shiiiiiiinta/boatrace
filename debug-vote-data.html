<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>票数・金額デバッグ</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        pre { background: #f5f5f5; padding: 15px; overflow-x: auto; }
        .section { margin: 20px 0; border: 1px solid #ddd; padding: 15px; }
    </style>
</head>
<body>
    <h1>票数・金額データ検証</h1>
    
    <div class="section">
        <h2>三国12R Worker レスポンス</h2>
        <pre id="workerResponse"></pre>
    </div>
    
    <div class="section">
        <h2>票数・金額の詳細</h2>
        <pre id="voteDetails"></pre>
    </div>

    <script>
        async function checkVoteData() {
            try {
                const response = await fetch('https://boatrace.shinta7023.workers.dev/api/odds/10/12?hd=20260218');
                const data = await response.json();
                
                document.getElementById('workerResponse').textContent = JSON.stringify(data, null, 2);
                
                if (data.success && data.data && data.data.odds) {
                    let details = '各艇の票数・金額:\n\n';
                    let totalVotes = 0;
                    
                    data.data.odds.forEach(boat => {
                        details += `${boat.boatNumber}号艇:\n`;
                        details += `  オッズ: ${boat.oddsMin} - ${boat.oddsMax}\n`;
                        details += `  投票票数: ${boat.voteTickets || 0} 票\n`;
                        details += `  投票金額: ${boat.voteAmount || 0} 円 (${Math.floor((boat.voteAmount || 0) / 10000)} 万円)\n\n`;
                        totalVotes += (boat.voteTickets || 0);
                    });
                    
                    details += `総投票数: ${totalVotes} 票`;
                    
                    document.getElementById('voteDetails').textContent = details;
                    console.log('Vote data:', data.data.odds);
                } else {
                    document.getElementById('voteDetails').textContent = 'オッズデータが取得できませんでした';
                }
            } catch (error) {
                document.getElementById('workerResponse').textContent = `エラー: ${error.message}`;
                console.error(error);
            }
        }
        
        checkVoteData();
    </script>
</body>
</html>
